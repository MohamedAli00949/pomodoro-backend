{"version":3,"file":"static/js/120.73966e5c.chunk.js","mappings":"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","sources":["components/NavBar/NavBar.js","utils/DeletePopup/DeletePopup.js"],"sourcesContent":["import React, { useCallback, useState, lazy } from \"react\";\r\nimport { AiOutlineUser } from \"react-icons/ai\";\r\nimport { FiEdit3 } from 'react-icons/fi';\r\nimport { GrAchievement } from 'react-icons/gr';\r\nimport { MdLogout, MdLogin, MdDelete } from \"react-icons/md\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nimport \"./style.css\";\r\nimport { useEffect } from \"react\";\r\nimport { getUserData, LOGOUT, deleteUser, refreshToken } from \"../../actions/auth\";\r\nimport Loading from \"../../utils/Loading\";\r\nimport DeletePopup from \"../../utils/DeletePopup/DeletePopup\";\r\nconst TodoList = lazy(() => import('../../icons/list/TodoList'));\r\n\r\nconst NavBar = ({ setMessage }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [openDelete, setOpenDelete] = useState(false);\r\n  const { started } = useSelector(state => state.timer);\r\n  const { user } = useSelector(state => state.auth);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token') && user === undefined) {\r\n      dispatch(getUserData(setMessage));\r\n      const decodedToken = jwt_decode(localStorage.getItem('token'));\r\n      const tokenExp = ((decodedToken.exp * 1000 - new Date().getTime()) / (1000 * 60 * 60));\r\n      if (localStorage.getItem('token') && tokenExp < 24) {\r\n        dispatch(refreshToken(setMessage));\r\n      }\r\n    }\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (user !== undefined) {\r\n      const decodedToken = jwt_decode(localStorage.getItem('token'));\r\n\r\n      if (decodedToken.exp * 1000 < new Date().getTime()) {\r\n        dispatch({ type: LOGOUT });\r\n        console.log(decodedToken.ext * 1000 - new Date().getTime())\r\n      }\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [user]);\r\n\r\n  const toggleMenu = useCallback(() => {\r\n    if (open) {\r\n      document.body.style.overflow = \"auto\";\r\n    } else {\r\n      document.body.style.overflow = \"hidden\";\r\n    }\r\n    setOpen((o) => !o);\r\n    // eslint-disable-next-line\r\n  }, [open]);\r\n\r\n  const logout = () => {\r\n    dispatch({ type: LOGOUT });\r\n    toggleMenu();\r\n  };\r\n\r\n  const handleDeleteUser = () => { setOpenDelete(false); dispatch(deleteUser(setMessage)); }\r\n\r\n  const getUserName = () => {\r\n    if (user.name.length <= 18) {\r\n      return user.name;\r\n    } else if (user.name.split(' ').length > 1) {\r\n      return user.name.split(' ')[0];\r\n    } else {\r\n      return user.name.slice(0, 15) + '...';\r\n    }\r\n  }\r\n\r\n  const toggleDelete = () => {\r\n    setOpenDelete(true);\r\n    toggleMenu();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {openDelete && (\r\n        <DeletePopup type={\"your account\"} onCancel={() => setOpenDelete(false)} onOk={handleDeleteUser} />\r\n      )}\r\n      <nav className=\"nav-bar\">\r\n        <Link to=\"/\">\r\n          <h1>Entagk</h1>\r\n        </Link>\r\n        <div style={{ position: 'relative' }}>\r\n          {!localStorage.getItem('token') ? (\r\n            <Link\r\n              aria-label=\"login user\"\r\n              className={`login ${(started || window.location.pathname === '/auth') ? 'disabled' : ''}`}\r\n              to=\"/auth\"\r\n            >\r\n              <MdLogin />\r\n              <span style={{ marginLeft: 10 }}>\r\n                Login\r\n              </span>\r\n            </Link>\r\n          ) : user ? (\r\n            <button\r\n              aria-label=\"user button\"\r\n              className=\"user\"\r\n              onClick={() => setOpen(o => !o)}\r\n              style={{ boxShadow: open && 'inset 0 0 5px #6f6f6f' }}>\r\n              <div className={`user-logo ${user?.avatar && 'img'}`}>\r\n                {user?.avatar ? (\r\n                  <img src={user.avatar} alt=\"avatar\" width=\"\" height=\"\" />\r\n                ) : (\r\n                  <AiOutlineUser />\r\n                )}\r\n              </div>\r\n              <span className=\"name\">{getUserName()}</span>\r\n            </button>\r\n          ) : (<><Loading size=\"30\" strokeWidth=\"5\" color={\"#fff\"} backgroud=\"transparent\" paddingBlock='0' /></>)}\r\n          {open && (\r\n            <>\r\n              <div className=\"menu-content\">\r\n                <div className=\"row\">\r\n                  <Link\r\n                    to=\"/user/achievements\"\r\n                    onClick={toggleMenu}\r\n                    aria-label=\"user button in menu\">\r\n                    <GrAchievement />\r\n                    <span style={{ marginLeft: 10 }}>\r\n                      achievements\r\n                    </span>\r\n                  </Link>\r\n                  <Link\r\n                    to=\"/templates/you\"\r\n                    onClick={toggleMenu}\r\n                    aria-label=\"user button in menu\">\r\n                    <TodoList />\r\n                    <span style={{ marginLeft: 10 }}>\r\n                      todos templates\r\n                    </span>\r\n                  </Link>\r\n                  <Link\r\n                    to=\"/user/edit\"\r\n                    onClick={toggleMenu}\r\n                    aria-label=\"user button in menu\">\r\n                    <FiEdit3 />\r\n                    <span style={{ marginLeft: 10 }}>\r\n                      edit account\r\n                    </span>\r\n                  </Link>\r\n                  <button\r\n                    onClick={logout}\r\n                    aria-label=\"logout button in menu\">\r\n                    <MdLogout />\r\n                    <span style={{ marginLeft: 10 }}>\r\n                      Logout\r\n                    </span>\r\n                  </button>\r\n                  <button\r\n                    aria-label=\"delete account button\"\r\n                    onClick={toggleDelete}\r\n                    style={{ color: \"red\" }}\r\n                  >\r\n                    <MdDelete />\r\n                    <span style={{ marginLeft: 10 }}>Delete Account</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div onClick={toggleMenu} style={{\r\n                height: \"100%\",\r\n                width: \"100%\"\r\n              }}></div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </nav>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default NavBar;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport './style.css';\r\n\r\nfunction DeletePopup({\r\n  type,\r\n  onOk,\r\n  onCancel\r\n}) {\r\n  const [background, setBackground] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (document.querySelectorAll('.glass-container').length > 1) {\r\n      setBackground(true);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"glass-container\" style={{ background: background && \"none\" }}>\r\n      <div className=\"glass-effect delete-popup\">\r\n        <p>Are you sure to {type}?</p>\r\n        <div className=\"buttons\">\r\n          <button aria-label=\"ok deleteing account\" onClick={onOk} className=\"ok\">Delete</button>\r\n          <button aria-label=\"cancel deleteing account\" onClick={onCancel} className=\"cancel\">cancel</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DeletePopup;\r\n"],"names":["TodoList","lazy","setMessage","useState","open","setOpen","openDelete","setOpenDelete","started","useSelector","state","timer","user","auth","dispatch","useDispatch","useEffect","localStorage","getItem","undefined","getUserData","tokenExp","jwt_decode","exp","Date","getTime","refreshToken","decodedToken","type","LOGOUT","console","log","ext","toggleMenu","useCallback","document","body","style","overflow","o","DeletePopup","onCancel","onOk","deleteUser","className","to","position","onClick","boxShadow","avatar","src","alt","width","height","name","length","split","slice","Loading","size","strokeWidth","color","backgroud","paddingBlock","window","location","pathname","marginLeft","background","setBackground","querySelectorAll"],"sourceRoot":""}