{"version":3,"file":"static/js/120.3efe0bcf.chunk.js","mappings":"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","sources":["components/NavBar/NavBar.js"],"sourcesContent":["import React, { useCallback, useState, lazy } from \"react\";\r\nimport { AiOutlineUser, /*AiOutlineClose*/ } from \"react-icons/ai\";\r\n// import { HiMenu, HiUser, HiOutlineDocumentReport } from \"react-icons/hi\";\r\nimport { FiEdit3 } from 'react-icons/fi';\r\nimport { GrAchievement } from 'react-icons/gr';\r\n// import { FaMoneyCheck } from \"react-icons/fa\";\r\nimport { MdLogout, MdLogin, MdDelete } from \"react-icons/md\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nimport \"./style.css\";\r\nimport { useEffect } from \"react\";\r\nimport { getUserData, LOGOUT, deleteUser, refreshToken } from \"../../actions/auth\";\r\nimport Loading from \"../../utils/Loading\";\r\nconst TodoList = lazy(() => import('../../icons/list/TodoList'));\r\n\r\nconst NavBar = ({ setMessage }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [openDelete, setOpenDelete] = useState(false);\r\n  const { started } = useSelector(state => state.timer);\r\n  const { user } = useSelector(state => state.auth);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token') && user === undefined) {\r\n      dispatch(getUserData(setMessage));\r\n      const decodedToken = jwt_decode(localStorage.getItem('token'));\r\n      const tokenExp = ((decodedToken.exp * 1000 - new Date().getTime()) / (1000 * 60 * 60));\r\n      if (localStorage.getItem('token') && tokenExp < 24) {\r\n        dispatch(refreshToken(setMessage));\r\n      }\r\n    }\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (user !== undefined) {\r\n      const decodedToken = jwt_decode(localStorage.getItem('token'));\r\n\r\n      if (decodedToken.exp * 1000 < new Date().getTime()) {\r\n        dispatch({ type: LOGOUT });\r\n        console.log(decodedToken.ext * 1000 - new Date().getTime())\r\n      }\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [user]);\r\n\r\n  const toggleMenu = useCallback(() => {\r\n    if (open) {\r\n      document.body.style.overflow = \"auto\";\r\n    } else {\r\n      document.body.style.overflow = \"hidden\";\r\n    }\r\n    setOpen((o) => !o);\r\n    // eslint-disable-next-line\r\n  }, [open]);\r\n\r\n  const logout = () => { dispatch({ type: LOGOUT }); toggleMenu(); };\r\n\r\n  const delete_user = () => { setOpenDelete(false); dispatch(deleteUser(setMessage)); }\r\n\r\n  const getUserName = () => {\r\n    if (user.name.length <= 18) {\r\n      return user.name;\r\n    } else if (user.name.split(' ').length > 1) {\r\n      return user.name.split(' ')[0];\r\n    } else {\r\n      return user.name.slice(0, 15) + '...';\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {openDelete && (\r\n        <div className=\"glass-container\">\r\n          <div className=\"glass-effect delete-popup\">\r\n            <h4>Do you sure you want to delete your account ?</h4>\r\n            <div className=\"buttons\">\r\n              <button aria-label=\"cancel deleteing account\" onClick={() => setOpenDelete(false)} className=\"cancel\">cancel</button>\r\n              <button aria-label=\"ok deleteing account\" onClick={delete_user} className=\"ok\">ok</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <nav className=\"nav-bar\">\r\n        <Link to=\"/\">\r\n          <h1>Entagk</h1>\r\n        </Link>\r\n        <div style={{ position: 'relative' }}>\r\n          {!localStorage.getItem('token') ? (\r\n            <Link\r\n              aria-label=\"login user\"\r\n              className={`login ${(started || window.location.pathname === '/auth') ? 'disabled' : ''}`}\r\n              to=\"/auth\"\r\n            >\r\n              <MdLogin />\r\n              <span style={{ marginLeft: 10 }}>\r\n                Login\r\n              </span>\r\n            </Link>\r\n          ) : user ? (\r\n            <button\r\n              aria-label=\"user button\"\r\n              className=\"user\"\r\n              onClick={() => setOpen(o => !o)}\r\n              style={{ boxShadow: open && 'inset 0 0 5px #6f6f6f' }}>\r\n              <div className={`user-logo ${user?.avatar && 'img'}`}>\r\n                {user?.avatar ? (\r\n                  <img src={user.avatar} alt=\"avatar\" width=\"\" height=\"\" />\r\n                ) : (\r\n                  <AiOutlineUser />\r\n                )}\r\n              </div>\r\n              <span className=\"name\">{getUserName()}</span>\r\n            </button>\r\n          ) : (<><Loading size=\"30\" strokeWidth=\"5\" color={\"#fff\"} backgroud=\"transparent\" paddingBlock='0' /></>)}\r\n          {open && (\r\n            <>\r\n              <div className=\"menu-content\">\r\n                <div className=\"row\">\r\n                  <Link\r\n                    to=\"/user/achievements\"\r\n                    onClick={toggleMenu}\r\n                    aria-label=\"user button in menu\">\r\n                    <GrAchievement />\r\n                    <span style={{ marginLeft: 10 }}>\r\n                      achievements\r\n                    </span>\r\n                  </Link>\r\n                  <Link\r\n                    to=\"/user/templates\"\r\n                    onClick={toggleMenu}\r\n                    aria-label=\"user button in menu\">\r\n                    <TodoList />\r\n                    <span style={{ marginLeft: 10 }}>\r\n                      todos templates\r\n                    </span>\r\n                  </Link>\r\n                  <Link\r\n                    to=\"/user/edit\"\r\n                    onClick={toggleMenu}\r\n                    aria-label=\"user button in menu\">\r\n                    <FiEdit3 />\r\n                    <span style={{ marginLeft: 10 }}>\r\n                      edit account\r\n                    </span>\r\n                  </Link>\r\n                  <button\r\n                    onClick={logout}\r\n                    aria-label=\"logout button in menu\">\r\n                    <MdLogout />\r\n                    <span style={{ marginLeft: 10 }}>\r\n                      Logout\r\n                    </span>\r\n                  </button>\r\n                  <button\r\n                    aria-label=\"delete account button\"\r\n                    onClick={() => setOpenDelete(true)}\r\n                    style={{ color: \"red\" }}\r\n                  >\r\n                    <MdDelete />\r\n                    <span style={{ marginLeft: 10 }}>Delete Account</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div onClick={toggleMenu} style={{\r\n                height: \"100%\",\r\n                width: \"100%\"\r\n              }}></div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </nav>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default NavBar;\r\n"],"names":["TodoList","lazy","setMessage","useState","open","setOpen","openDelete","setOpenDelete","started","useSelector","state","timer","user","auth","dispatch","useDispatch","useEffect","localStorage","getItem","undefined","getUserData","tokenExp","jwt_decode","exp","Date","getTime","refreshToken","decodedToken","type","LOGOUT","console","log","ext","toggleMenu","useCallback","document","body","style","overflow","o","className","onClick","deleteUser","to","position","boxShadow","avatar","src","alt","width","height","name","length","split","slice","Loading","size","strokeWidth","color","backgroud","paddingBlock","window","location","pathname","marginLeft"],"sourceRoot":""}